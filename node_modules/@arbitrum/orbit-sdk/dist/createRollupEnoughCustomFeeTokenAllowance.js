"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.createRollupEnoughCustomFeeTokenAllowance = void 0;
const contracts_1 = require("./contracts");
const ParentChain_1 = require("./types/ParentChain");
const erc20_1 = require("./utils/erc20");
const constants_1 = require("./constants");
async function createRollupEnoughCustomFeeTokenAllowance({ nativeToken, account, publicClient, }) {
    const chainId = publicClient.chain?.id;
    if (!(0, ParentChain_1.validParentChainId)(chainId)) {
        throw new Error('chainId is undefined');
    }
    const allowance = await (0, erc20_1.fetchAllowance)({
        address: nativeToken,
        owner: account,
        spender: contracts_1.rollupCreator.address[chainId],
        publicClient,
    });
    return allowance >= constants_1.deterministicFactoriesDeploymentEstimatedFees;
}
exports.createRollupEnoughCustomFeeTokenAllowance = createRollupEnoughCustomFeeTokenAllowance;
